---
layout: post
title: px dp sp区别
category: android
---

##一、基本概念  

|术语|说明|备注|
|:---|:---| :---|
|Screen size(屏幕尺寸)|是按照屏幕对角线的尺寸来决定的，指的是手机实际的物理尺寸，如：2.8英寸，3.7英寸，4.3英寸|mi2手机是4.3英寸|
|Aspect Ratio(宽高比) |值得是实际的物理尺寸宽高比率，分为long和nolong|mi2是16:9，属long|
|Resolution(分辨率)|和电脑的分辨率概念一样，指手机屏幕纵、横方向像素个数|mi2是1280x720|
|DPI(dot per inch)|每英寸像素数，如：120dpi,160dpi，240dpi等，如mi2：分辨率为1280x720，屏幕尺寸为4.3英寸，dpi=342|可以反映屏幕的清晰度，用于缩放UI|
|Density(密度)|屏幕里像素值浓度，resolution/Screen size，可以反映出手机密度|  |
|Density-independent Pixels(dip)|指的是逻辑密度计算单位，dip和具体像素值的对应公式是dip/pixel=dpi值/160，也就是px=dpx(dpi/160)|  |

**ppi (pixels per inch)**图像分辨率 （在图像中，每英寸所包含的像素数目）

**dpi (dots per inch)**打印分辨率 （每英寸所能打印的点数，即打印精度）

**dp：（Density-independent Pixels）密度独立像素，基于屏幕物理密度的一个抽象单位。** 这个单位依赖于160dpi(dots per inch)的屏幕,在这个屏幕上1dp=1px。在高密度屏幕上画1dp需要 1 x 屏幕的放大比例因子的像素，同样在低密度需要 1 x 屏幕的缩小比例因子的像素。dp转px的比例是根据屏幕密度变化的，但不是一个必然的直接的比例。在不同密度屏幕上设置尺寸，使用dp单位（代替px单位）是一个简单的解决方案。  
这个是最常用也是最难理解的尺寸单位。它与“像素密度”密切相关，所以首先我们解释一下什么是像素密度。假设有一部手机，屏幕的物理尺寸为1.5英寸x2英寸，屏幕分辨率为240x320，则我们可以计算出在这部手机的屏幕上，每英寸包含的像素点的数量为xdpi=240/1.5=160dpi（横向）或ydpi=320/2=160dpi（纵向），160就是这部手机的像素密度，像素密度的单位是Dots Per Inch的缩写，即每英寸像素数量。横向和纵向的这个值都是相同的，原因是大部分手机屏幕使用正方形的像素点。  
不同的手机/平板可能具有不同的像素密度，例如同为4寸手机，有480×320分辨率的也有800×480分辨率的，前者的像素密度就比较低。Android系统定义了四种像素密度：低（120dpi）、中（160dpi）、高（240dpi）和超高（320dpi），它们对应的dp到px的系数分别为0.75、1、1.5和2，这个系数乘以dp长度就是像素数。例如界面上有一个长度为“100dp”的图片，那么它在240dpi的手机上实际显示为80×1.5=120px，在320dpi的手机上实际显示为80×2=160px。如果你拿这两部手机放在一起对比，会发现这个图片的物理尺寸“差不多”，这就是使用dp作为单位的效果  

**sp (Scale-independent Pixels)比例独立像素** 这是与dp很像的一个单位，但受用户的字体大小设置影响进行缩放。推荐用于设置字体大小，这样就能同时适配屏幕密度和用户字体偏好。

**px (pixels)像素，** 对应屏幕上的实际像素。这个单位不推荐使用，因为在实际使用中会根据设备而变化。每台设备在每英寸的px数不同，并且屏幕上的有效px数也不同。

根据google的推荐，像素统一使用dip，字体统一使用sp

**pt（Points）磅，** 是一个标准的长度单位，1pt＝1/72英寸，用于印刷业，非常简单易用； 在 Android 中，1pt 大概等于 2.22sp。

**mm (Millimeters)毫米，** 长度单位。

**in (Inches)英寸，** 长度单位。1英寸=2.54厘米。

##二、应用  
在android里面，获取一个窗口的metrics,里面有这么几个值

	metrics.density;
	metrics.densityDpi;

densityDpi:就是我们常说的dpi。
density:其实是DPI/(160像素/英寸)后得到的值。是不是有点奇怪，应为我带了单位。从上面就看得出了，DPI本身的单位也是 像素/英寸，所以density其实是没单位的，他就是一个比例值。  
而dpi的单位是 像素/英寸，比较符合物理上面的密度定义，密度不都是单位度量的值么，所以我更喜欢把dpi叫像素密度，简称密度，density还是就叫density。

##三、各单位间转换
1.计算dpi  
如一个机器mi2，屏幕尺寸4.3英寸，分辨率1280x720。
Diagonal pixel表示对角线的像素值(=![Diagonal pixel](http://files.jb51.net/file_images/article/201301/2013011316354441.gif "Optional title"))，

	PPI = √（长度像素数² + 宽度像素数²） / 屏幕对角线英寸数

DPI=sqrt(1280² + 720²)/4.3=342像素/英寸。  
那么density就是（342px/inch）/(160px/inch)=2.14

2.计算dp与px  
dp转px:

	1dp = (DPI/(160像素/英寸))px = density px

PX = density x DP;  
像素值 = density x 设备无关像素值。
	
3.为啥 标准dpi = 160  
(1) Android Design [1] 里把主流设备的 dpi 归成了四个档次，120 dpi、160 dpi、240 dpi、320 dpi  
实际开发当中，我们经常需要对这几个尺寸进行相互转换（比如先在某个分辨率下完成设计，然后缩放到其他尺寸微调后输出），一般按照 dpi 之间的比例即 2:1.5:1:0.75 来给界面中的元素来进行尺寸定义。  
也就是说如果以 160 dpi 作为基准的话，只要尺寸的 DP 是 4 公倍数，XHD的PI 下乘以 2，HDPI 下乘以 1.5，LDPI 下乘以 0.75 即可满足所有尺寸下都是整数 pixel 。  
但假设以 240 dpi 作为标准，那需要 DP 是 3 的公倍数，XHDPI 下乘以 1.333，MDPI 下乘以 0.666 ，LDPI 下除以 2
而以 LDPI 和 XHDPI 为基准就更复杂了，所以选择 160 dpi  
(2) 这个在Google的官方文档中有给出了解释，因为第一款Android设备（HTC的T-Mobile G1）是属于160dpi的。
